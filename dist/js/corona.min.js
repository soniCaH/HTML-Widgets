/*! kevin-van-ransbeeck-widgets v1.0.0 | (c) 2020  | MIT License |  */
"use strict";function asyncGeneratorStep(e,t,n,o,a,r,l){try{var c=e[r](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(o,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){asyncGeneratorStep(r,o,a,l,c,"next",e)}function c(e){asyncGeneratorStep(r,o,a,l,c,"throw",e)}l(void 0)}))}}
/*! kevin-van-ransbeeck-widgets v1.0.0 | (c) 2020  | MIT License |  */function storageAvailable(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}function getSummary(){return _getSummary.apply(this,arguments)}function _getSummary(){return(_getSummary=_asyncToGenerator((function*(){const e=storageAvailable("localStorage"),t=(new Date).getTime();let n,o,a,r={};if(e&&window.localStorage.getItem("covid19")){const e=JSON.parse(window.localStorage.getItem("covid19"));e.date>=t-9e5&&(r=e.data)}if(0===Object.keys(r).length){const{Global:r,Countries:l,Date:c}=yield fetch("https://api.covid19api.com/summary").then((function(e){if(console.log("Network request"),e.ok)return e.json();document.getElementById("corona_global--total--confirmed").innerHTML="FOUTJE: "+e.status+e.text(),alert(e.status+e.text())})).catch((function(e){document.getElementById("corona_global--total--confirmed").innerHTML="ERROR: "+e,alert(e)}));e&&window.localStorage.setItem("covid19",JSON.stringify({date:t,data:{Global:r,Countries:l,Datetime:c}})),n=r,o=l,a=c}else{console.log("Cached!"),console.log(r);const{Global:e,Countries:t,Date:l}=r;n=e,o=t,a=l}document.getElementById("corona_global--total--confirmed").innerHTML=n.TotalConfirmed.toLocaleString("nl-BE"),document.getElementById("corona_global--total--deaths").innerHTML=n.TotalDeaths.toLocaleString("nl-BE"),document.getElementById("corona_global--total--recovered").innerHTML=n.TotalRecovered.toLocaleString("nl-BE"),document.getElementById("corona_global--new--confirmed").innerHTML=n.NewConfirmed.toLocaleString("nl-BE"),document.getElementById("corona_global--new--deaths").innerHTML=n.NewDeaths.toLocaleString("nl-BE"),document.getElementById("corona_global--new--recovered").innerHTML=n.NewRecovered.toLocaleString("nl-BE"),document.getElementById("corona_global__datetime").innerHTML=new Date(a).toLocaleString("nl-BE");const l=o.find(e=>"Belgium"===e.Country);document.getElementById("corona_belgium--total--confirmed").innerHTML=l.TotalConfirmed.toLocaleString("nl-BE"),document.getElementById("corona_belgium--total--deaths").innerHTML=l.TotalDeaths.toLocaleString("nl-BE"),document.getElementById("corona_belgium--total--recovered").innerHTML=l.TotalRecovered.toLocaleString("nl-BE"),document.getElementById("corona_belgium--new--confirmed").innerHTML=l.NewConfirmed.toLocaleString("nl-BE"),document.getElementById("corona_belgium--new--deaths").innerHTML=l.NewDeaths.toLocaleString("nl-BE"),document.getElementById("corona_belgium--new--recovered").innerHTML=l.NewRecovered.toLocaleString("nl-BE"),document.getElementById("corona_belgium__datetime").innerHTML=new Date(l.Date).toLocaleString("nl-BE")}))).apply(this,arguments)}getSummary();